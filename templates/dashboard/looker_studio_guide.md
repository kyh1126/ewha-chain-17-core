# Looker Studio 대시보드 생성 가이드

## 1. BigQuery 데이터 소스 연결

### 단계별 가이드

1. **Looker Studio 접속**
   - [Looker Studio](https://lookerstudio.google.com/) 접속
   - "만들기" → "데이터 소스" 클릭

2. **BigQuery 연결**
   - "BigQuery" 선택
   - 프로젝트 선택: `bigquery-public-data`
   - 데이터셋 선택: `crypto_ethereum` 또는 `crypto_solana_mainnet_us`
   - 테이블 선택: Ethereum은 `transactions`, `blocks` / Solana는 `Transactions`, `Blocks` (대문자 주의)

3. **쿼리 결과 연결 (권장)**
   - "커스텀 쿼리" 선택
   - BigQuery에서 작성한 SQL 쿼리 붙여넣기
   - "연결" 클릭

## 2. 기본 차트 생성

### 거래량 추이 (시계열 차트)

1. **차트 추가**
   - "차트 추가" → "시계열 차트" 선택

2. **데이터 설정**
   - 날짜 차원: `date` 필드
   - 지표: `tx_count` (합계)

3. **스타일링**
   - 차트 제목: "일별 거래량 추이"
   - 색상: Ethereum = 파란색, Solana = 보라색

### 활성 주소 Top N (막대 차트)

1. **차트 추가**
   - "차트 추가" → "막대 차트" 선택

2. **데이터 설정**
   - 차원: `address` 필드
   - 지표: `tx_count` (합계)
   - 정렬: `tx_count` 내림차순
   - 행 수 제한: 20

### 수수료 추이 (복합 차트)

1. **차트 추가**
   - "차트 추가" → "복합 차트" 선택

2. **데이터 설정**
   - 날짜 차원: `date` 필드
   - 지표 1: `avg_gas_cost_eth` (선 그래프)
   - 지표 2: `tx_count` (막대 그래프, 보조 축)

## 3. 필터 추가

### 날짜 범위 필터

1. "컨트롤 추가" → "날짜 범위 선택기"
2. 날짜 필드 연결
3. 기본값 설정: "지난 30일"

### 체인 선택 필터 (Ethereum vs Solana)

1. "컨트롤 추가" → "드롭다운 목록"
2. 데이터 소스에서 체인 필드 연결
3. 다중 선택 허용

## 4. 대시보드 레이아웃

### 권장 레이아웃

```
┌─────────────────────────────────────┐
│  제목: 온체인 데이터 분석 대시보드    │
├─────────────────────────────────────┤
│  [필터: 날짜 범위] [필터: 체인]     │
├─────────────────────────────────────┤
│  거래량 추이 (시계열)               │
├──────────────────┬──────────────────┤
│  활성 주소 Top 20│  수수료 추이     │
├──────────────────┴──────────────────┤
│  실패율 추이                        │
├─────────────────────────────────────┤
│  Gemini 요약 (텍스트 박스)          │
└─────────────────────────────────────┘
```

## 5. Gemini 요약 통합

### 방법 1: 수동 업데이트

1. Python 스크립트로 Gemini 요약 생성
2. Looker Studio에 "텍스트" 위젯 추가
3. 요약 텍스트 붙여넣기
4. 주기적으로 수동 업데이트

### 방법 2: API 연동 (고급)

1. Cloud Functions로 Gemini API 호출 함수 생성
2. BigQuery에 요약 결과 저장
3. Looker Studio에서 해당 테이블 연결
4. 자동 업데이트 설정

## 6. 공유 및 배포

### 공유 설정

1. "공유" 버튼 클릭
2. 링크 공유 활성화
3. 권한 설정: "링크가 있는 모든 사용자"

### 임베드 코드 생성

1. "파일" → "임베드" → "웹사이트에 삽입"
2. 생성된 iframe 코드 복사
3. 웹사이트나 문서에 삽입

## 7. 팁 및 베스트 프랙티스

### 성능 최적화

- **데이터 새로고침**: 자동 새로고침 설정 (최대 1시간 간격)
- **쿼리 최적화**: BigQuery에서 데이터 집계 후 연결
- **필터 활용**: 사용자가 필요한 데이터만 조회하도록 필터 제공

### 시각화 팁

- **색상 일관성**: Ethereum = 파란색, Solana = 보라색으로 통일
- **단위 표시**: ETH, SOL, USD 등 명확히 표시
- **툴팁 활용**: 차트에 설명 추가

### 접근성

- **제목과 설명**: 각 차트에 명확한 제목과 설명 추가
- **범례**: 모든 차트에 범례 포함
- **반응형**: 모바일에서도 보기 좋게 레이아웃 조정

## 8. 문제 해결

### 데이터가 표시되지 않음

- BigQuery 쿼리 권한 확인
- 데이터 소스 연결 상태 확인
- 쿼리 결과가 비어있는지 확인

### 차트가 느림

- 데이터 범위 축소 (날짜 필터)
- BigQuery에서 집계 쿼리 사용
- 캐시 활용

### 공유 링크가 작동하지 않음

- 권한 설정 확인
- 링크 공유가 활성화되어 있는지 확인
